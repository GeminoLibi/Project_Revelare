{% extends "base.html" %}

{% block title %}String & Pattern Search - Project Revelare{% endblock %}

{% block content %}
<div class="string-search">
    <div class="page-header">
        <h1><i class="fas fa-search-plus"></i> String & Pattern Search</h1>
        <p>Search for specific strings or regular expressions within project files.</p>
    </div>

    <div class="card">
        <h2><i class="fas fa-file-search"></i> Configure Search</h2>
        <form method="POST" class="search-form">
            <div class="form-group">
                <label for="project_name">Project to Search *</label>
                <select id="project_name" name="project_name" required>
                    <option value="">Select a project...</option>
                    {% for project in projects %}
                    <option value="{{ project.name }}">{{ project.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="search_strings">Search Strings or Patterns *</label>
                <textarea name="search_strings" id="search_strings" rows="4"
                          placeholder="Enter strings separated by commas (e.g., password, secret, api_key)
Or enter a single Regular Expression if Regex mode is enabled." 
                          required></textarea>
                <div class="help-text">Enter one or more literal strings (comma-separated), or a single regex pattern.</div>
            </div>

            <div class="form-group">
                <label><input type="checkbox" name="use_regex"> Enable Regular Expression (Regex) Search</label>
                <div class="help-text">Treat the input as a single regex pattern instead of comma-separated strings. Example: `\b\d{3}-\d{2}-\d{4}\b` to find SSNs.</div>
            </div>

            <div class="form-group">
                <label for="file_extensions">File Extensions (Optional)</label>
                <input type="text" name="file_extensions" id="file_extensions" 
                       placeholder=".txt, .log, .csv, .json (comma-separated)">
                <div class="help-text">Limit search to specific file types. Leave empty to search all files.</div>
            </div>

            <div class="form-group">
                <label for="context_chars">Context Characters</label>
                <input type="number" name="context_chars" id="context_chars" 
                       value="100" min="20" max="500">
                <div class="help-text">Number of characters to show around each match (20-500).</div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> Search Now
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}